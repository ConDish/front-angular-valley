<div class="px-5 mt-12">

    <div class="jumbotron">

        <h1 class="text-grey-dark font-normal text-center">Patient CRUD</h1>

    </div>
    <!-- Alert Error -->
    <div *ngIf="patientService.alertError" class="bg-red-lightest border border-red-light text-red-dark px-4 py-3 rounded relative mt-4" role="Error">
        <strong class="font-bold">{{ patientService.messageUC }} </strong>
        <span class="block sm:inline">Campos vacios o el correo ya existe en la base de datos</span>
        <span class="absolute pin-t pin-b pin-r px-4 py-3">
          <svg (click)="patientService.alertError = false" class="fill-current h-6 w-6 text-red" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
        </span>
    </div>

    <!-- Alert Success -->
    <div *ngIf="patientService.alertSuccess" class="bg-blue-lightest border border-blue-light text-blue-dark px-4 py-3 rounded relative mt-4" role="alert">
        <strong class="font-bold"> Success! </strong>
        <span class="block sm:inline">{{ patientService.messageUC }}</span>
        <span class="absolute pin-t pin-b pin-r px-4 py-3">
          <svg (click)="patientService.alertSuccess = false" class="fill-current h-6 w-6 text-blue-dark" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
        </span>
    </div>
    <div class="flex w-full flex-wrap justify-between mt-10 mb-4">

        <div class="flex w-1/2 justify-center py-2">
            <div class="w-full max-w-xs">
                <!-- Form Create User or Update User -->
                <form class="w-full max-w-md" (submit)="patientService.createPatient(name, email, password, doctor, city)">
                    <div class="flex flex-wrap -mx-3 mb-6">
                        <div class="w-full px-3">
                            <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="name">
                                Nombre
                            </label>

                            <input class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-lighter rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-grey" value="{{patientService.name}}" type="text" placeholder="Juan" #name>
                        </div>
                    </div>
                    <div class="flex flex-wrap -mx-3 mb-6">
                        <div class="w-full px-3">
                            <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="email">
                                Email
                            </label>

                            <input class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-lighter rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-grey" id="email" value="{{patientService.email}}" type="text" placeholder="example@hotmail.com" #email>
                        </div>
                    </div>
                    <div class="flex flex-wrap -mx-3 mb-4">
                        <div class="w-full px-3">
                            <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="password">
                                Password
                            </label>
                            <input class="appearance-none block w-full bg-grey-lighter text-grey-darker border border-grey-lighter rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-grey" id="password" type="password" placeholder="**************"
                                #password>
                        </div>
                    </div>

                    <div class="flex flex-wrap -mx-3 mb-6">
                        <div class="w-full px-3">
                            <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="doctor">
                                Doctor
                            </label>
                            <div class="relative">
                                <select class="block appearance-none w-full bg-grey-lighter border border-grey-lighter text-grey-darker py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-grey" id="doctor" #doctor>
                                    <option *ngFor="let doctor of patientService.doctors" value="{{doctor.id}}" >{{ doctor.name }}</option>
                                </select>
                                <div class="pointer-events-none absolute pin-y pin-r flex items-center px-2 text-grey-darker">
                                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                        <path
                                            d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
                                    </svg>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="flex flex-wrap -mx-3 mb-6">
                        <div class="w-full px-3">
                            <label class="block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2" for="city">
                                City
                            </label>
                            <div class="relative">
                                <select class="block appearance-none w-full bg-grey-lighter border border-grey-lighter text-grey-darker py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-grey" id="city" #city>
                                    <option *ngFor="let city of patientService.cities" value="{{city.id}}" >{{ city.name }}</option>
                                </select>
                                <div class="pointer-events-none absolute pin-y pin-r flex items-center px-2 text-grey-darker">
                                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                                        <path
                                            d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z" />
                                    </svg>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="w-full flex items-end justify-end">
                        <button *ngIf="patientService.flagButton" class="shadow bg-blue hover:bg-blue-light focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded">
                            Create
                        </button>
                        <button *ngIf="!patientService.flagButton" class="shadow bg-green hover:bg-green-light focus:shadow-outline focus:outline-none text-white font-bold py-2 px-4 rounded">
                                Update
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <div class="w-1/2 ">
            <div class="bg-white w-full rounded">
                <table class="text-left border-collapse ">
                    <!--Border collapse doesn't work on this site yet but it's available in newer tailwind versions -->
                    <thead>
                        <tr>
                            <th class="py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light">
                                #
                            </th>
                            <th class="py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light">
                                Name</th>
                            <th class="py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light">
                                Email</th>
                            <th class="py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light">
                                Doctor</th>
                            <th class="py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light">
                                City</th>
                            <th class="py-2 px-4 bg-grey-lightest font-bold uppercase text-sm text-grey-dark border-b border-grey-light">
                            </th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let patient of patientService.patients" class="hover:bg-grey-lighter">
                            <td class="py-2 px-4 border-b border-grey-light">{{patient.id}}</td>
                            <td class="py-2 px-4 border-b border-grey-light">{{patient.name}}</td>
                            <td class="py-2 px-4 border-b border-grey-light">{{patient.email}}</td>
                            <td class="py-2 px-4 border-b border-grey-light">{{patient.name_doctor}}</td>
                            <td class="py-2 px-4 border-b border-grey-light">{{patient.name_city}}</td>

                            <td class="py-2 px-4 border-b border-grey-light">
                                <button (click)="patientService.getPatient(patient)" class="text-grey-lighter font-bold py-3 px-4 rounded text-xs bg-green hover:bg-green-dark no-underline mr-5 cursor-pointer">Edit</button>
                                <button (click)="deletePatient(patient)" class="pl-3 text-grey-lighter font-bold py-3 px-4 rounded text-xs bg-red-light hover:bg-blue-dark text-center no-underline cursor-pointer">Delete</button>
                            </td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>